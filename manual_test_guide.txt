"""
Script para testar o upload via API diretamente
Simula o que o dashboard faz quando você faz upload
"""

# Este script é para DENO, não para Python
# Deixa eu criar a versão em TypeScript/Deno

print("""
Para testar o upload manualmente, use este comando (abra no seu navegador console):

// 1. Ler o arquivo
const fileInput = document.querySelector('input[type="file"]');
const file = fileInput.files[0];

// 2. Preparar o upload
const formData = new FormData();
formData.append('file', file);

// 3. Enviar para a Edge Function
const response = await fetch('https://[seu-supabase-url]/functions/v1/process-spreadsheet', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer [seu-token]',
  },
  body: formData
});

const data = await response.json();
console.log('Resposta:', data);
console.log('Sucesso:', data.success);
console.log('Processados:', data.processed);
console.log('Erros:', data.errors);

// 4. Verificar banco de dados
const patientsResp = await supabase
  .from('patients')
  .select('COUNT(*)')
  .single();
console.log('Total de pacientes:', patientsResp.data);
""")
